PART
{
	name = dsts_japierI
	module = Part
	author = Jiraiyah
	MODEL
	{
		model = DeepSky/TheSpice/Japiers/RapierEngineTypeI
		position = 0.0,0.0,0.0
		rotation = 0,0,0
		scale = 1.0, 1.0, 1.0
	}
	scale = 1
	rescaleFactor = 0.01
	node_attach = -8.0, 0.0, 0.0, -1.0, 0.0, 0.0, 0
	TechRequired = aerospaceTech
	entryCost = 45000
	cost = 9500
	category = Engine
	subcategory = 0
	title = Spice Powered Japier Engine Type 1
	manufacturer = Deep Sky
	description = A very highly advanced and hence very powerful dual-mode radial engine. In air-breathing mode it is capable of allowing casual flight with great fuel economy on planets known with up to 10 atmospheres of pressure, but it does not do well at high speed in thin atmosphere.
	attachRules = 1,1,1,1,0
	mass = 2.563
	dragModelType = default
	maximum_drag = 0.033
	minimum_drag = 0.05
	angularDrag = 0.333
	crashTolerance = 20
	breakingForce = 600
	breakingTorque = 600
	maxTemp = 2800
	bulkheadProfiles = mk2
	tags = fuel fueltank engine japier rapier ssto spice jet rocket
		
	MODULE
	{
		name = ModuleResourceIntake
		resourceName = IntakeAtm
		area = 0.01
		intakeSpeed = 10
		intakeTransformName = Intake
		machCurve
		{
			key = 0 0.85 0 0
			key = 1 1 0 0
			key = 4 3 0 0
			key = 10 0.01 0 0
		}
	}

	RESOURCE
	{
		name = IntakeAtm
		amount = 5
		maxAmount = 5
	}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 1000
		maxAmount = 1000
	}
	
	RESOURCE
	{
		name = SpiceGas
		amount = 500000
		maxAmount = 500000
	}
	
	EFFECTS
	{
		running_closed
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_spurts
				volume = 0.0 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.2
				pitch = 1.0 1.0
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_aeroSpike
				transformName = smokePoint
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1
			}
			MODEL_MULTI_PARTICLE
			{
				name = flamethrust
				modelName = Squad/FX/ks1_Exhaust
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.2
				emission = 0.1 0.5
				emission = 1.0 1.5
				speed = 0.0 0.2
				speed = 1.0 0.6
			}
			// MODEL_MULTI_PARTICLE
			// {
				// name = flamethrust
				// modelName = Squad/FX/shockExhaust_blue
				// transformName = thrustTransform
				// emission = 0.0 0.0
				// emission = 0.05 0.2
				// emission = 0.1 0.5
				// emission = 1.0 1.5
				// speed = 0.0 0.2
				// speed = 1.0 0.6
			// }
			// MODEL_MULTI_PARTICLE
			// {
				// name = panther
				// modelName = Squad/FX/afterburner_shock
				// transformName = thrustTransform
				// emission = 0.0 0.0
				// emission = 0.05 0.5
				// emission = 1.0 1
				// speed = 0.0 0.0
				// speed = 0.05 0.1
				// speed = 0.33 0.4
				// speed = 1.0 1.0
				// energy = 0.0 1.0
				// energy = 1.0 1.0
			// }
		}
		power_open
		{
			AUDIO
			{
				channel = Ship
				clip = sound_rocket_spurts
				volume = 0.0 0.0
				volume = 0.05 0.0
				volume = 1.0 1.0
				pitch = 0.0 0.2
				pitch = 1.0 1.0
				loop = true
			}
			MODEL_MULTI_PARTICLE
			{
				name = flamethrust
				modelName = Squad/FX/shockExhaust_blue
				transformName = thrustTransform
				emission = 0.0 0.0
				emission = 0.05 0.2
				emission = 0.1 0.5
				emission = 1.0 1.0
				speed = 0.0 0.2
				speed = 1.0 0.3
				speed = 1.1 0.4
				speed = 2.0 0.6
			}
			// MODEL_MULTI_PARTICLE
			// {
				// name = panther
				// modelName = Squad/FX/afterburner_shock
				// transformName = thrustTransform
				// emission = 0.0 0.0
				// emission = 0.05 0.5
				// emission = 1.0 1
				// emission = 1.1 1.2
				// emission = 1.5 1.4
				// speed = 0.0 0.0
				// speed = 0.05 0.1
				// speed = 0.33 0.4
				// speed = 1.0 0.5
				// speed = 2.0 1.5
				// energy = 0.0 1.0
				// energy = 1.0 1.1
				// energy = 1.1 1.5
			// }
		}
		running_open
		{
			AUDIO
			{
				channel = Ship
				clip = sound_jet_deep
				volume = 0.0 0.0
				volume = 0.05 0.6
				volume = 1.0 1.0
				pitch = 0.0 0.7
				pitch = 1.0 1.4
				loop = true
			}
			PREFAB_PARTICLE
			{
				prefabName = fx_smokeTrail_aeroSpike
				transformName = smokePoint
				emission = 0.0 0.0
				emission = 0.05 0.0
				emission = 0.075 0.25
				emission = 1.0 1.25
				speed = 0.0 0.25
				speed = 1.0 1.0
				localOffset = 0, 0, 1
			}
		}
		engage
		{
			AUDIO
			{
				channel = Ship
				clip = sound_vent_soft
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
		flameout
		{
			PREFAB_PARTICLE
			{
				prefabName = fx_exhaustSparks_flameout_2
				transformName = smokePoint
				oneShot = true
			}
			AUDIO
			{
				channel = Ship
				clip = sound_explosion_low
				volume = 1.0
				pitch = 2.0
				loop = false
			}
		}
	}
	MODULE
	{
		name = MultiModeEngine
		primaryEngineID = AirBreathing
		secondaryEngineID = ClosedCycle
	}
	MODULE
	{
		name = ModuleEnginesFX
		engineID = AirBreathing
		powerEffectName = power_open
		//runningEffectName = running_open
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.33
		minThrust = 0
		maxThrust = 400
		heatProduction = 60
		useEngineResponseTime = True
		engineAccelerationSpeed = 0.2
		engineDecelerationSpeed = 0.35
		useVelocityCurve = False		
		spoolEffectName = running_open
		engineSpoolIdle = 0.05
		engineSpoolTime = 2.0
		EngineType = Turbine
		exhaustDamageMultiplier = 50
		exhaustDamageDistanceOffset = 0.19
		clampPropReceived = True
		PROPELLANT
		{
			name = IntakeAtm
			ignoreForIsp = True
			ratio = 0.1
		}
		PROPELLANT
		{
			name = ElectricCharge
			ignoreForIsp = True
			ratio = 2.4
		}
		PROPELLANT
		{
			name = SpiceGas
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			ratio = 2
			DrawGauge = True
		}
		atmosphereCurve
		{
			key = 0 90000 0 0
		}
		// Jet params
		atmChangeFlow = True
		useVelCurve = True
		useAtmCurve = True
		flowMultCap = 3.0
		// no mach (heat) limit
		velCurve
		{
			key = 0 1
			key = 0.5 1.5
			key = 1.481431 1.407802
			key = 4 2
			key = 6.967738 1.984196 -0.0956966 -0.0956966
			key = 9 0.7
			key = 10 0
		}
		//atm pressure vs thrust
		atmCurve
		{
			key = 0 0 7.973689 1.355819
			key = 0.06126547 1.403069 9.837906 0.8978873
			key = 0.5381018 1.423583 -0.9169012 -1.170646
			key = 1 1
			key = 2.2 2.27136
			key = 5 3 0 0.2857143
		}
	}
	MODULE
	{
		name = ModuleEnginesFX
		engineID = ClosedCycle
		runningEffectName = running_closed
		thrustVectorTransformName = thrustTransform
		exhaustDamage = True
		ignitionThreshold = 0.1
		minThrust = 0
		maxThrust = 800
		heatProduction = 133
		fxOffset = 0, 0, 0.25
		EngineType = LiquidFuel
		exhaustDamageDistanceOffset = 0.19
		PROPELLANT
		{
			name = ElectricCharge
			ignoreForIsp = True
			ratio = 2.4
		}
		PROPELLANT
		{
			name = SpiceGas
			resourceFlowMode = STAGE_STACK_FLOW_BALANCE
			ratio = 8
			DrawGauge = True
		}
		atmosphereCurve
		{
			key = 0 75000
			key = 1 60000
			key = 9 37500
		}
	}
	MODULE
	{
		name = FXModuleAnimateThrottle
		animationName = HeatAnimationEmissiveRapier
		responseSpeed = 0.001
		dependOnEngineState = True
		dependOnThrottle = True
		preferMultiMode = True // bind to the parent multimode module, not the actual engines.
	}
	MODULE
	{
		name = ModuleGimbal
		gimbalTransformName = obj_gimbal
		gimbalRange = 3
	}
	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 1
		fxMax = 0.5
		maxDistance = 20
		falloff = 2
		thrustTransformName = thrustTransform
	}
	MODULE
	{
		name = ModuleSurfaceFX
		thrustProviderModuleIndex = 2
		fxMax = 0.6
		maxDistance = 30
		falloff = 1.6
		thrustTransformName = thrustTransform
	}
}
