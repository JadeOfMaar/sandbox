// QoL patch for MEV Heavy Industries engines made by Cyne
// Patched authored by JadeOfMaar

// Titles and base stats
@PART[DaedalusDrive]:NEEDS[MEVFusionTek,Waterfall]
{
	// MODULE
	// {
		// name = ModuleWaterfallFX
		// moduleID = Daedalus
		// engineID = Cruise
		// CONTROLLER
		// {
			// name = atmosphereDepth
			// linkedTo = atmosphere_density
		// }
		// CONTROLLER
		// {
			// name = throttle
			// linkedTo = throttle
		// }
	// }
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = Daedalus
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
			engineID = 
			responseRateUp = 100
			responseRateDown = 100
		}
		EFFECT
		{
			name = cone
			parentName = thrustTransform
			MODEL
			{
				path = Waterfall/FX/fx-complex-plume-1
				positionOffset = 0,0,10
				rotationOffset = -90,0,0
				scaleOffset = 1,1,1
				MATERIAL
				{
					transform = CylinderMesh
					shader = Waterfall/Additive Directional
					randomizeSeed = True
					COLOR
					{
						colorName = _StartTint
						colorValue = 0.43921569,0.749019623,0.827450991,1
					}
					COLOR
					{
						colorName = _EndTint
						colorValue = 0.243137255,0.333333343,0.792156875,1
					}
					FLOAT
					{
						floatName = _TintFalloff
						value = 1.29999995
					}
					FLOAT
					{
						floatName = _Brightness
						value = 1
					}
					FLOAT
					{
						floatName = _Fresnel
						value = 2
					}
					FLOAT
					{
						floatName = _FresnelInvert
						value = 0
					}
					TEXTURE
					{
						textureSlotName = _MainTex
						texturePath = Waterfall/FX/fx-noise-3
						textureScale = 1,1
						textureOffset = 0,0.150000006
					}
					FLOAT
					{
						floatName = _SpeedY
						value = 30
					}
					FLOAT
					{
						floatName = _SpeedX
						value = 0
					}
					FLOAT
					{
						floatName = _Noise
						value = 2.4000001
					}
					FLOAT
					{
						floatName = _TileX
						value = 1
					}
					FLOAT
					{
						floatName = _TileY
						value = 0.5
					}
					FLOAT
					{
						floatName = _Seed
						value = 0
					}
					FLOAT
					{
						floatName = _Falloff
						value = 2.20000005
					}
					VECTOR4
					{
						vectorName = _DirAdjust
						value = 1,0,0,0
					}
				}
				MATERIAL
				{
					transform = PlaneMesh
					shader = Waterfall/Additive Directional
					randomizeSeed = True
					COLOR
					{
						colorName = _StartTint
						colorValue = 0.223529413,0.474509805,0.56078434,1
					}
					COLOR
					{
						colorName = _EndTint
						colorValue = 0.180392161,0.203921571,0.572549045,1
					}
					TEXTURE
					{
						textureSlotName = _MainTex
						texturePath = Waterfall/FX/fx-alpha-noise-1
						textureScale = 1,1
						textureOffset = 0,0
					}
					FLOAT
					{
						floatName = _Brightness
						value = 0.443889737
					}
					FLOAT
					{
						floatName = _Falloff
						value = 1
					}
					FLOAT
					{
						floatName = _TintFalloff
						value = 0.252777398
					}
					FLOAT
					{
						floatName = _SpeedX
						value = 9.09998608
					}
					FLOAT
					{
						floatName = _SpeedY
						value = 8.07776737
					}
					FLOAT
					{
						floatName = _Noise
						value = 1.06166518
					}
					VECTOR4
					{
						vectorName = _DirAdjust
						value = 0,0,0,0
					}
					FLOAT
					{
						floatName = _Seed
						value = 0
					}
				}
			}
			SCALEMODIFIER
			{
				name = basicSize
				controllerName = atmosphereDepth
				transformName = Waterfall/FX/fx-complex-plume-1(Clone)
				combinationType = REPLACE
				useRandomness = False
				randomnessController = random
				randomnessScale = 1
				xCurve
				{
					key = 0 15 0 0
					key = 1 15 0 0
				}
				yCurve
				{
					key = 0 20 0 0
					key = 1 20 0 0
				}
				zCurve
				{
					key = 0 15 0 0
					key = 1 15 0 0
				}
			}
			SCALEMODIFIER
			{
				name = tailCurve
				controllerName = atmosphereDepth
				transformName = B_Tail
				combinationType = REPLACE
				useRandomness = False
				randomnessController = random
				randomnessScale = 1
				xCurve
				{
					key = 0 1 0 0
					key = 1 0.01 0 0
				}
				yCurve
				{
					key = 0 0 0 0
					key = 1 1.6 0 0
				}
				zCurve
				{
					key = 0 1 0 0
					key = 1 0.01 0 0
				}
			}
			SCALEMODIFIER
			{
				name = throatCurve
				controllerName = atmosphereDepth
				transformName = B_Throat
				combinationType = REPLACE
				useRandomness = False
				randomnessController = random
				randomnessScale = 1
				xCurve
				{
					key = 0 1 0 0
				}
				yCurve
				{
				}
				zCurve
				{
					key = 0 1 0 0
				}
			}
			SCALEMODIFIER
			{
				name = postExitCurve
				controllerName = atmosphereDepth
				transformName = B_PostExit1
				combinationType = REPLACE
				useRandomness = False
				randomnessController = random
				randomnessScale = 1
				xCurve
				{
					key = 0 1 0 0
					key = 1 0.3 0 0
				}
				yCurve
				{
					key = 0 1.2 0 0
					key = 1 1.2 0 0
				}
				zCurve
				{
					key = 0 1 0 0
					key = 1 0.3 0 0
				}
			}
			FLOATMODIFIER
			{
				name = lightCyl01Tint
				controllerName = throttle
				transformName = CylinderMesh
				combinationType = REPLACE
				useRandomness = False
				randomnessController = random
				randomnessScale = 1
				floatName = _Brightness
				floatCurve
				{
					key = 0 1 0 0
					key = 1 1 0 0
				}
			}
			SCALEMODIFIER
			{
				name = exitCurve
				controllerName = atmosphereDepth
				transformName = B_Exit
				combinationType = REPLACE
				useRandomness = False
				randomnessController = random
				randomnessScale = 1
				xCurve
				{
					key = 0 1 0 0
					key = 1 0.6 0 0
				}
				yCurve
				{
					key = 0 1 0 0
					key = 1 1 0 0
				}
				zCurve
				{
					key = 0 1 0 0
					key = 1 0.6 0 0
				}
			}
		}
	}
}
@PART[BussardFusion]:NEEDS[MEVFusionTek,Waterfall]
{
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = Bussard
		engineID = basicEngine
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
	}
}
@PART[EpsteinDrive]:NEEDS[MEVFusionTek,Waterfall]
{
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = EpsteinS4Cruise
		engineID = Cruise
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
	}
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = EpsteinS4Overdrive
		engineID = Overdrive
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
	}
}
@PART[EpsteinDriveV4]:NEEDS[MEVFusionTek,Waterfall]
{
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = EpsteinS2Cruise
		engineID = Cruise
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
	}
	MODULE
	{
		name = ModuleWaterfallFX
		moduleID = EpsteinS2Overdrive
		engineID = Overdrive
		CONTROLLER
		{
			name = atmosphereDepth
			linkedTo = atmosphere_density
		}
		CONTROLLER
		{
			name = throttle
			linkedTo = throttle
		}
	}
}